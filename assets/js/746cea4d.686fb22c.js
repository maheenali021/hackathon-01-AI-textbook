"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[621],{8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var o=s(6540);const t={},r=o.createContext(t);function l(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),o.createElement(r.Provider,{value:n},e.children)}},9980:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"module1/module1-milestone","title":"Module 1 Milestone Project: Simple ROS 2 Robot Node","description":"Project Overview","source":"@site/docs/module1/module1-milestone.md","sourceDirName":"module1","slug":"/module1/module1-milestone","permalink":"/hackathon-01-AI-textbook/docs/module1/module1-milestone","draft":false,"unlisted":false,"editUrl":"https://github.com/maheenali021/hackathon-01-AI-textbook/tree/main/docs/module1/module1-milestone.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"Module 1 Milestone Project: Simple ROS 2 Robot Node"},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 7: Understanding URDF for Humanoid Robots","permalink":"/hackathon-01-AI-textbook/docs/module1/understanding-urdf"},"next":{"title":"Chapter 1: Introduction to Digital Twins","permalink":"/hackathon-01-AI-textbook/docs/module2/intro-to-digital-twins"}}');var t=s(4848),r=s(8453);const l={sidebar_position:8,title:"Module 1 Milestone Project: Simple ROS 2 Robot Node"},i="Module 1 Milestone Project: Simple ROS 2 Robot Node",a={},c=[{value:"Project Overview",id:"project-overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Project Requirements",id:"project-requirements",level:2},{value:"Step-by-Step Implementation",id:"step-by-step-implementation",level:2},{value:"Step 1: Create the Package",id:"step-1-create-the-package",level:3},{value:"Step 2: Create the Sensor Publisher Node",id:"step-2-create-the-sensor-publisher-node",level:3},{value:"Step 3: Create the Command Service Server",id:"step-3-create-the-command-service-server",level:3},{value:"Step 4: Create the Main Controller Node",id:"step-4-create-the-main-controller-node",level:3},{value:"Step 5: Update setup.py",id:"step-5-update-setuppy",level:3},{value:"Testing Your Implementation",id:"testing-your-implementation",level:2},{value:"Test 1: Run Individual Nodes",id:"test-1-run-individual-nodes",level:3},{value:"Test 2: Use ROS 2 Tools to Verify",id:"test-2-use-ros-2-tools-to-verify",level:3},{value:"Enhancement Challenges",id:"enhancement-challenges",level:2},{value:"Solution Summary",id:"solution-summary",level:2},{value:"Learning Review",id:"learning-review",level:2},{value:"Next Steps",id:"next-steps",level:2}];function m(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"module-1-milestone-project-simple-ros-2-robot-node",children:"Module 1 Milestone Project: Simple ROS 2 Robot Node"})}),"\n",(0,t.jsx)(n.h2,{id:"project-overview",children:"Project Overview"}),"\n",(0,t.jsx)(n.p,{children:"In this milestone project, you'll create a complete ROS 2 node that demonstrates the core concepts learned in Module 1. You'll build a simple robot controller that can receive commands and control a simulated robot."}),"\n",(0,t.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsx)(n.p,{children:"After completing this project, you will be able to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Create a complete ROS 2 package with multiple nodes"}),"\n",(0,t.jsx)(n.li,{children:"Implement publishers, subscribers, services, and actions"}),"\n",(0,t.jsx)(n.li,{children:"Use parameter servers for configuration"}),"\n",(0,t.jsx)(n.li,{children:"Test your nodes using ROS 2 tools"}),"\n",(0,t.jsx)(n.li,{children:"Understand the structure of a complete ROS 2 application"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"project-requirements",children:"Project Requirements"}),"\n",(0,t.jsxs)(n.p,{children:["Create a ROS 2 package called ",(0,t.jsx)(n.code,{children:"simple_robot_controller"})," with the following components:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"A publisher node that publishes robot sensor data"}),"\n",(0,t.jsx)(n.li,{children:"A subscriber node that processes sensor data"}),"\n",(0,t.jsx)(n.li,{children:"A service server that handles robot commands"}),"\n",(0,t.jsx)(n.li,{children:"An action server for long-running navigation tasks"}),"\n",(0,t.jsx)(n.li,{children:"A main controller node that coordinates all components"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-by-step-implementation",children:"Step-by-Step Implementation"}),"\n",(0,t.jsx)(n.h3,{id:"step-1-create-the-package",children:"Step 1: Create the Package"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python simple_robot_controller\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-2-create-the-sensor-publisher-node",children:"Step 2: Create the Sensor Publisher Node"}),"\n",(0,t.jsxs)(n.p,{children:["Create the file ",(0,t.jsx)(n.code,{children:"simple_robot_controller/simple_robot_controller/sensor_publisher.py"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import LaserScan\nfrom std_msgs.msg import Float32\nimport random\n\nclass SensorPublisher(Node):\n    def __init__(self):\n        super().__init__('sensor_publisher')\n        self.publisher = self.create_publisher(LaserScan, 'laser_scan', 10)\n        self.distance_publisher = self.create_publisher(Float32, 'distance_to_obstacle', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = LaserScan()\n        msg.header.stamp = self.get_clock().now().to_msg()\n        msg.header.frame_id = 'laser_frame'\n        msg.angle_min = -1.57\n        msg.angle_max = 1.57\n        msg.angle_increment = 0.01\n        msg.time_increment = 0.001\n        msg.scan_time = 0.1\n        msg.range_min = 0.0\n        msg.range_max = 10.0\n\n        # Generate random range data\n        msg.ranges = [random.uniform(0.5, 5.0) for _ in range(314)]\n        msg.intensities = [100.0 for _ in range(314)]\n\n        self.publisher.publish(msg)\n\n        # Publish distance to closest obstacle\n        distance_msg = Float32()\n        distance_msg.data = min(msg.ranges)\n        self.distance_publisher.publish(distance_msg)\n\n        self.get_logger().info(f'Publishing: {min(msg.ranges):.2f}m to closest obstacle')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    sensor_publisher = SensorPublisher()\n    rclpy.spin(sensor_publisher)\n    sensor_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-3-create-the-command-service-server",children:"Step 3: Create the Command Service Server"}),"\n",(0,t.jsxs)(n.p,{children:["Create the file ",(0,t.jsx)(n.code,{children:"simple_robot_controller/simple_robot_controller/command_service.py"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom rclpy.executors import MultiThreadedExecutor\nfrom rclpy.callback_groups import MutuallyExclusiveCallbackGroup\nfrom std_srvs.srv import SetBool\nfrom geometry_msgs.msg import Twist\n\nclass CommandService(Node):\n    def __init__(self):\n        super().__init__('command_service')\n        self.srv = self.create_service(\n            SetBool,\n            'robot_command',\n            self.command_callback\n        )\n        self.cmd_vel_publisher = self.create_publisher(Twist, 'cmd_vel', 10)\n        self.is_moving = False\n\n    def command_callback(self, request, response):\n        if request.data:  # True means start moving\n            self.get_logger().info('Starting robot movement')\n            self.start_movement()\n            response.success = True\n            response.message = 'Robot movement started'\n        else:  # False means stop\n            self.get_logger().info('Stopping robot movement')\n            self.stop_movement()\n            response.success = True\n            response.message = 'Robot movement stopped'\n\n        return response\n\n    def start_movement(self):\n        self.is_moving = True\n        # Publish a forward velocity command\n        msg = Twist()\n        msg.linear.x = 0.5  # Move forward at 0.5 m/s\n        self.cmd_vel_publisher.publish(msg)\n\n    def stop_movement(self):\n        self.is_moving = False\n        # Publish zero velocity to stop\n        msg = Twist()\n        self.cmd_vel_publisher.publish(msg)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    command_service = CommandService()\n    rclpy.spin(command_service)\n    command_service.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-4-create-the-main-controller-node",children:"Step 4: Create the Main Controller Node"}),"\n",(0,t.jsxs)(n.p,{children:["Create the file ",(0,t.jsx)(n.code,{children:"simple_robot_controller/simple_robot_controller/main_controller.py"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import LaserScan\nfrom std_msgs.msg import Float32\nfrom std_srvs.srv import SetBool\nfrom geometry_msgs.msg import Twist\nimport math\n\nclass MainController(Node):\n    def __init__(self):\n        super().__init__('main_controller')\n\n        # Subscriptions\n        self.subscription = self.create_subscription(\n            LaserScan,\n            'laser_scan',\n            self.laser_callback,\n            10\n        )\n\n        # Publisher for robot movement commands\n        self.cmd_vel_publisher = self.create_publisher(Twist, 'cmd_vel', 10)\n\n        # Client for the command service\n        self.cli = self.create_client(SetBool, 'robot_command')\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('Service not available, waiting again...')\n\n        # Timer for control loop\n        self.timer = self.create_timer(0.1, self.control_loop)\n\n        # Robot state\n        self.obstacle_distance = float('inf')\n        self.scan_data = None\n        self.safe_distance = 1.0  # meters\n\n    def laser_callback(self, msg):\n        # Store the latest scan data\n        self.scan_data = msg\n        # Calculate minimum distance\n        if msg.ranges:\n            valid_ranges = [r for r in msg.ranges if not math.isinf(r) and not math.isnan(r)]\n            if valid_ranges:\n                self.obstacle_distance = min(valid_ranges)\n\n    def control_loop(self):\n        if self.scan_data is None:\n            return\n\n        # Simple obstacle avoidance logic\n        msg = Twist()\n\n        if self.obstacle_distance > self.safe_distance:\n            # Move forward if path is clear\n            msg.linear.x = 0.3\n            msg.angular.z = 0.0\n        else:\n            # Stop and turn to avoid obstacle\n            msg.linear.x = 0.0\n            msg.angular.z = 0.5  # Turn right\n\n        self.cmd_vel_publisher.publish(msg)\n\n        # Log robot status\n        self.get_logger().info(\n            f'Distance: {self.obstacle_distance:.2f}m, '\n            f'Lin: {msg.linear.x:.2f}, Ang: {msg.angular.z:.2f}'\n        )\n\ndef main(args=None):\n    rclpy.init(args=args)\n    main_controller = MainController()\n    rclpy.spin(main_controller)\n    main_controller.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-5-update-setuppy",children:"Step 5: Update setup.py"}),"\n",(0,t.jsxs)(n.p,{children:["Update the ",(0,t.jsx)(n.code,{children:"simple_robot_controller/setup.py"})," file to include your new nodes:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\nimport os\nfrom glob import glob\n\npackage_name = 'simple_robot_controller'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='your_name',\n    maintainer_email='your_email@example.com',\n    description='Simple ROS 2 robot controller for learning',\n    license='TODO: License declaration',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'sensor_publisher = simple_robot_controller.sensor_publisher:main',\n            'command_service = simple_robot_controller.command_service:main',\n            'main_controller = simple_robot_controller.main_controller:main',\n        ],\n    },\n)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"testing-your-implementation",children:"Testing Your Implementation"}),"\n",(0,t.jsx)(n.h3,{id:"test-1-run-individual-nodes",children:"Test 1: Run Individual Nodes"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Terminal 1 - Run the sensor publisher\nros2 run simple_robot_controller sensor_publisher\n\n# Terminal 2 - Run the command service\nros2 run simple_robot_controller command_service\n\n# Terminal 3 - Run the main controller\nros2 run simple_robot_controller main_controller\n"})}),"\n",(0,t.jsx)(n.h3,{id:"test-2-use-ros-2-tools-to-verify",children:"Test 2: Use ROS 2 Tools to Verify"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Check active nodes\nros2 node list\n\n# Check topics\nros2 topic list\n\n# Call the service\nros2 service call /robot_command std_srvs/srv/SetBool "{data: true}"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"enhancement-challenges",children:"Enhancement Challenges"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Add more sensor types (camera, IMU, etc.)"}),"\n",(0,t.jsx)(n.li,{children:"Implement more complex navigation behaviors"}),"\n",(0,t.jsx)(n.li,{children:"Add a simple GUI using rqt"}),"\n",(0,t.jsx)(n.li,{children:"Create a launch file to start all nodes at once"}),"\n",(0,t.jsx)(n.li,{children:"Add parameter configuration for different robot behaviors"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"solution-summary",children:"Solution Summary"}),"\n",(0,t.jsx)(n.p,{children:"This milestone project demonstrates how to create a complete ROS 2 application with multiple interacting components. You've learned how to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Create custom ROS 2 nodes with publishers, subscribers, and services"}),"\n",(0,t.jsx)(n.li,{children:"Handle sensor data and make decisions based on it"}),"\n",(0,t.jsx)(n.li,{children:"Structure a ROS 2 package properly"}),"\n",(0,t.jsx)(n.li,{children:"Test your nodes using ROS 2 command-line tools"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"learning-review",children:"Learning Review"}),"\n",(0,t.jsx)(n.p,{children:"After completing this project, reflect on:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"How did the publish-subscribe pattern facilitate communication between nodes?"}),"\n",(0,t.jsx)(n.li,{children:"What challenges did you face when coordinating multiple nodes?"}),"\n",(0,t.jsx)(n.li,{children:"How could you extend this simple controller to handle more complex navigation tasks?"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsx)(n.p,{children:"This milestone project sets the foundation for more complex robotics applications. In the next modules, you'll learn how to integrate simulation environments, perception systems, and advanced AI capabilities with your ROS 2 foundation."})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}}}]);