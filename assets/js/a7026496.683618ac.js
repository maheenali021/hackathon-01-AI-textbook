"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[662],{8453:(n,e,r)=>{r.d(e,{R:()=>a,x:()=>s});var i=r(6540);const t={},o=i.createContext(t);function a(n){const e=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),i.createElement(o.Provider,{value:e},n.children)}},9256:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module2/unity-visualization","title":"Chapter 3: Unity Visualization for Robotics","description":"Introduction to Unity for Robotics","source":"@site/docs/module2/unity-visualization.md","sourceDirName":"module2","slug":"/module2/unity-visualization","permalink":"/hackathon-01-AI-textbook/docs/module2/unity-visualization","draft":false,"unlisted":false,"editUrl":"https://github.com/maheenali021/hackathon-01-AI-textbook/tree/main/docs/module2/unity-visualization.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Chapter 3: Unity Visualization for Robotics"},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 2: Gazebo Basics","permalink":"/hackathon-01-AI-textbook/docs/module2/gazebo-basics"},"next":{"title":"Chapter 4: Sensor Simulation in Digital Twins","permalink":"/hackathon-01-AI-textbook/docs/module2/sensor-simulation"}}');var t=r(4848),o=r(8453);const a={sidebar_position:3,title:"Chapter 3: Unity Visualization for Robotics"},s="Unity Visualization for Robotics",l={},c=[{value:"Introduction to Unity for Robotics",id:"introduction-to-unity-for-robotics",level:2},{value:"Unity Robotics Setup",id:"unity-robotics-setup",level:2},{value:"Installing Unity Robotics Hub",id:"installing-unity-robotics-hub",level:3},{value:"Unity ROS TCP Connector",id:"unity-ros-tcp-connector",level:3},{value:"Creating Robot Environments",id:"creating-robot-environments",level:2},{value:"Environment Setup",id:"environment-setup",level:3},{value:"Physics Simulation",id:"physics-simulation",level:2},{value:"Unity Physics vs Real Robot Dynamics",id:"unity-physics-vs-real-robot-dynamics",level:3},{value:"Sensor Simulation",id:"sensor-simulation",level:2},{value:"Camera Simulation",id:"camera-simulation",level:3},{value:"LIDAR Simulation",id:"lidar-simulation",level:3},{value:"Human-Robot Interaction",id:"human-robot-interaction",level:2},{value:"AR/VR Integration",id:"arvr-integration",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Level of Detail (LOD) System",id:"level-of-detail-lod-system",level:3},{value:"Integration with ROS/ROS 2",id:"integration-with-rosros-2",level:2},{value:"Message Handling",id:"message-handling",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Scene Organization",id:"scene-organization",level:3},{value:"Asset Management",id:"asset-management",level:3},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Hands-on Exercise",id:"hands-on-exercise",level:2}];function d(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"unity-visualization-for-robotics",children:"Unity Visualization for Robotics"})}),"\n",(0,t.jsx)(e.h2,{id:"introduction-to-unity-for-robotics",children:"Introduction to Unity for Robotics"}),"\n",(0,t.jsx)(e.p,{children:"Unity is a powerful game engine that can be used for robotics simulation and visualization. It provides high-quality rendering capabilities and physics simulation, making it suitable for creating realistic robot environments."}),"\n",(0,t.jsx)(e.h2,{id:"unity-robotics-setup",children:"Unity Robotics Setup"}),"\n",(0,t.jsx)(e.h3,{id:"installing-unity-robotics-hub",children:"Installing Unity Robotics Hub"}),"\n",(0,t.jsx)(e.p,{children:"Unity provides the Robotics Hub to streamline the connection between Unity and ROS/ROS 2:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Download Unity Hub from unity.com"}),"\n",(0,t.jsx)(e.li,{children:"Install Unity Editor (2021.3 LTS or newer recommended)"}),"\n",(0,t.jsx)(e.li,{children:"Install the Unity Robotics Hub package"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"unity-ros-tcp-connector",children:"Unity ROS TCP Connector"}),"\n",(0,t.jsx)(e.p,{children:"The Unity ROS TCP Connector enables communication between Unity and ROS:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using Unity.Robotics.ROSTCPConnector;\r\nusing RosMessageTypes.Std;\r\nusing UnityEngine;\r\n\r\npublic class UnityRobotController : MonoBehaviour\r\n{\r\n    ROSConnection ros;\r\n    public string topicName = "unity_robot_command";\r\n\r\n    void Start()\r\n    {\r\n        // Get the ROS connection system\r\n        ros = ROSConnection.GetOrCreateInstance();\r\n        ros.RegisterPublisher<UInt8Msg>(topicName);\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        // Example: Send a command to ROS\r\n        if (Input.GetKeyDown(KeyCode.Space))\r\n        {\r\n            UInt8Msg command = new UInt8Msg();\r\n            command.data = 1; // Send command value\r\n            ros.Publish(topicName, command);\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"creating-robot-environments",children:"Creating Robot Environments"}),"\n",(0,t.jsx)(e.h3,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"using UnityEngine;\r\n\r\npublic class RobotEnvironment : MonoBehaviour\r\n{\r\n    public GameObject robotPrefab;\r\n    public Transform spawnPoint;\r\n    public Material[] materials;\r\n\r\n    void Start()\r\n    {\r\n        // Spawn robot in environment\r\n        Instantiate(robotPrefab, spawnPoint.position, spawnPoint.rotation);\r\n\r\n        // Set up environment materials\r\n        SetupEnvironment();\r\n    }\r\n\r\n    void SetupEnvironment()\r\n    {\r\n        // Create obstacles, platforms, etc.\r\n        CreateObstacles();\r\n        SetLighting();\r\n    }\r\n\r\n    void CreateObstacles()\r\n    {\r\n        // Create various obstacles for robot navigation\r\n        for (int i = 0; i < 10; i++)\r\n        {\r\n            Vector3 pos = new Vector3(\r\n                Random.Range(-10f, 10f),\r\n                0.5f,\r\n                Random.Range(-10f, 10f)\r\n            );\r\n\r\n            GameObject obstacle = GameObject.CreatePrimitive(PrimitiveType.Cube);\r\n            obstacle.transform.position = pos;\r\n            obstacle.transform.localScale = new Vector3(\r\n                Random.Range(0.5f, 2f),\r\n                Random.Range(1f, 3f),\r\n                Random.Range(0.5f, 2f)\r\n            );\r\n\r\n            // Add material\r\n            Renderer renderer = obstacle.GetComponent<Renderer>();\r\n            renderer.material = materials[Random.Range(0, materials.Length)];\r\n        }\r\n    }\r\n\r\n    void SetLighting()\r\n    {\r\n        // Configure lighting for the scene\r\n        RenderSettings.ambientLight = Color.gray;\r\n        RenderSettings.fog = true;\r\n        RenderSettings.fogColor = Color.lightGray;\r\n        RenderSettings.fogDensity = 0.01f;\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"physics-simulation",children:"Physics Simulation"}),"\n",(0,t.jsx)(e.h3,{id:"unity-physics-vs-real-robot-dynamics",children:"Unity Physics vs Real Robot Dynamics"}),"\n",(0,t.jsx)(e.p,{children:"Unity's physics engine can approximate real robot dynamics:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"using UnityEngine;\r\n\r\n[RequireComponent(typeof(Rigidbody))]\r\npublic class RobotDynamics : MonoBehaviour\r\n{\r\n    public float maxForce = 10f;\r\n    public float maxTorque = 5f;\r\n    public float frictionCoefficient = 0.1f;\r\n\r\n    private Rigidbody rb;\r\n\r\n    void Start()\r\n    {\r\n        rb = GetComponent<Rigidbody>();\r\n        ConfigurePhysics();\r\n    }\r\n\r\n    void ConfigurePhysics()\r\n    {\r\n        rb.mass = 10f; // Adjust based on real robot mass\r\n        rb.drag = 0.1f; // Linear drag\r\n        rb.angularDrag = 0.05f; // Angular drag\r\n        rb.interpolation = RigidbodyInterpolation.Interpolate;\r\n    }\r\n\r\n    public void ApplyMovement(Vector3 linearVelocity, Vector3 angularVelocity)\r\n    {\r\n        // Apply forces to simulate robot movement\r\n        rb.velocity = linearVelocity;\r\n        rb.angularVelocity = angularVelocity;\r\n    }\r\n\r\n    public void ApplyControlInputs(float forwardForce, float turnTorque)\r\n    {\r\n        // Apply forces based on control inputs\r\n        Vector3 forwardForceVector = transform.forward * forwardForce;\r\n        rb.AddForce(forwardForceVector, ForceMode.Force);\r\n\r\n        rb.AddTorque(transform.up * turnTorque, ForceMode.Torque);\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"sensor-simulation",children:"Sensor Simulation"}),"\n",(0,t.jsx)(e.h3,{id:"camera-simulation",children:"Camera Simulation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing Unity.Robotics.ROSTCPConnector;\r\nusing RosMessageTypes.Sensor;\r\n\r\npublic class CameraSensor : MonoBehaviour\r\n{\r\n    public Camera camera;\r\n    public string imageTopic = "camera/image_raw";\r\n    public int width = 640;\r\n    public int height = 480;\r\n\r\n    private ROSConnection ros;\r\n    private RenderTexture renderTexture;\r\n\r\n    void Start()\r\n    {\r\n        ros = ROSConnection.GetOrCreateInstance();\r\n\r\n        // Create render texture for camera\r\n        renderTexture = new RenderTexture(width, height, 24);\r\n        camera.targetTexture = renderTexture;\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        if (Time.frameCount % 30 == 0) // Send image every 30 frames\r\n        {\r\n            SendImage();\r\n        }\r\n    }\r\n\r\n    void SendImage()\r\n    {\r\n        // Capture image from camera\r\n        Texture2D tex = new Texture2D(width, height, TextureFormat.RGB24, false);\r\n        RenderTexture.active = renderTexture;\r\n        tex.ReadPixels(new Rect(0, 0, width, height), 0, 0);\r\n        tex.Apply();\r\n\r\n        // Convert to byte array and publish\r\n        byte[] imageData = tex.EncodeToPNG();\r\n\r\n        // Create ROS message (simplified)\r\n        // In practice, you would create a proper sensor_msgs/Image message\r\n\r\n        Destroy(tex);\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"lidar-simulation",children:"LIDAR Simulation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing System.Collections.Generic;\r\n\r\npublic class LIDARSensor : MonoBehaviour\r\n{\r\n    public int numRays = 360;\r\n    public float maxRange = 10f;\r\n    public float minRange = 0.1f;\r\n    public string lidarTopic = "scan";\r\n\r\n    private ROSConnection ros;\r\n\r\n    void Start()\r\n    {\r\n        ros = ROSConnection.GetOrCreateInstance();\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        if (Time.frameCount % 10 == 0) // Sample every 10 frames\r\n        {\r\n            ScanEnvironment();\r\n        }\r\n    }\r\n\r\n    void ScanEnvironment()\r\n    {\r\n        List<float> ranges = new List<float>();\r\n\r\n        for (int i = 0; i < numRays; i++)\r\n        {\r\n            float angle = (i * 360f / numRays) * Mathf.Deg2Rad;\r\n            Vector3 direction = new Vector3(\r\n                Mathf.Cos(angle),\r\n                0,\r\n                Mathf.Sin(angle)\r\n            );\r\n\r\n            RaycastHit hit;\r\n            if (Physics.Raycast(transform.position, direction, out hit, maxRange))\r\n            {\r\n                ranges.Add(hit.distance);\r\n            }\r\n            else\r\n            {\r\n                ranges.Add(maxRange); // No obstacle detected\r\n            }\r\n        }\r\n\r\n        // Publish scan data to ROS (implementation depends on ROS message format)\r\n        PublishScanData(ranges);\r\n    }\r\n\r\n    void PublishScanData(List<float> ranges)\r\n    {\r\n        // Publish to ROS topic\r\n        // Implementation would create and publish sensor_msgs/LaserScan message\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"human-robot-interaction",children:"Human-Robot Interaction"}),"\n",(0,t.jsx)(e.h3,{id:"arvr-integration",children:"AR/VR Integration"}),"\n",(0,t.jsx)(e.p,{children:"Unity excels at creating immersive AR/VR experiences for human-robot interaction:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing UnityEngine.XR;\r\n\r\npublic class HumanRobotInterface : MonoBehaviour\r\n{\r\n    public GameObject robotAvatar;\r\n    public Transform userHead;\r\n    public float interactionDistance = 3f;\r\n\r\n    void Update()\r\n    {\r\n        // Handle VR/AR interactions\r\n        HandleInteractions();\r\n        UpdateRobotBehavior();\r\n    }\r\n\r\n    void HandleInteractions()\r\n    {\r\n        // Raycast from user viewpoint\r\n        Vector3 rayOrigin = userHead.position;\r\n        Vector3 rayDirection = userHead.forward;\r\n\r\n        RaycastHit hit;\r\n        if (Physics.Raycast(rayOrigin, rayDirection, out hit, interactionDistance))\r\n        {\r\n            if (hit.collider.CompareTag("Robot"))\r\n            {\r\n                // User is looking at robot\r\n                HighlightRobot(true);\r\n\r\n                if (Input.GetButtonDown("Fire1")) // Trigger button\r\n                {\r\n                    SendCommandToRobot();\r\n                }\r\n            }\r\n            else\r\n            {\r\n                HighlightRobot(false);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            HighlightRobot(false);\r\n        }\r\n    }\r\n\r\n    void HighlightRobot(bool highlight)\r\n    {\r\n        // Visual feedback for robot selection\r\n        Renderer robotRenderer = robotAvatar.GetComponent<Renderer>();\r\n        if (highlight)\r\n        {\r\n            robotRenderer.material.color = Color.yellow;\r\n        }\r\n        else\r\n        {\r\n            robotRenderer.material.color = Color.white;\r\n        }\r\n    }\r\n\r\n    void SendCommandToRobot()\r\n    {\r\n        // Send command via ROS\r\n        // Implementation would publish to robot control topic\r\n    }\r\n\r\n    void UpdateRobotBehavior()\r\n    {\r\n        // Update robot behavior based on simulation\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,t.jsx)(e.h3,{id:"level-of-detail-lod-system",children:"Level of Detail (LOD) System"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"using UnityEngine;\r\n\r\npublic class RobotLODSystem : MonoBehaviour\r\n{\r\n    public GameObject[] lodLevels;\r\n    public float[] lodDistances;\r\n    public Transform viewer;\r\n\r\n    void Start()\r\n    {\r\n        viewer = Camera.main.transform;\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        UpdateLOD();\r\n    }\r\n\r\n    void UpdateLOD()\r\n    {\r\n        float distance = Vector3.Distance(transform.position, viewer.position);\r\n\r\n        for (int i = 0; i < lodLevels.Length; i++)\r\n        {\r\n            if (distance < lodDistances[i])\r\n            {\r\n                ActivateLOD(i);\r\n                return;\r\n            }\r\n        }\r\n\r\n        // If beyond max distance, hide robot\r\n        foreach (GameObject lod in lodLevels)\r\n        {\r\n            lod.SetActive(false);\r\n        }\r\n    }\r\n\r\n    void ActivateLOD(int level)\r\n    {\r\n        for (int i = 0; i < lodLevels.Length; i++)\r\n        {\r\n            lodLevels[i].SetActive(i == level);\r\n        }\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"integration-with-rosros-2",children:"Integration with ROS/ROS 2"}),"\n",(0,t.jsx)(e.h3,{id:"message-handling",children:"Message Handling"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using Unity.Robotics.ROSTCPConnector;\r\nusing RosMessageTypes.Geometry;\r\nusing RosMessageTypes.Std;\r\n\r\npublic class ROSMessageHandler : MonoBehaviour\r\n{\r\n    ROSConnection ros;\r\n\r\n    // Topics\r\n    string cmdVelTopic = "cmd_vel";\r\n    string jointStatesTopic = "joint_states";\r\n\r\n    void Start()\r\n    {\r\n        ros = ROSConnection.GetOrCreateInstance();\r\n\r\n        // Subscribe to ROS topics\r\n        ros.Subscribe<TwistMsg>(cmdVelTopic, CmdVelCallback);\r\n        ros.Subscribe<Float32MultiArrayMsg>(jointStatesTopic, JointStatesCallback);\r\n    }\r\n\r\n    void CmdVelCallback(TwistMsg twist)\r\n    {\r\n        // Handle velocity commands\r\n        Vector3 linear = new Vector3(twist.linear.x, twist.linear.y, twist.linear.z);\r\n        Vector3 angular = new Vector3(twist.angular.x, twist.angular.y, twist.angular.z);\r\n\r\n        // Apply to robot\r\n        ApplyVelocityCommand(linear, angular);\r\n    }\r\n\r\n    void JointStatesCallback(Float32MultiArrayMsg jointStates)\r\n    {\r\n        // Update joint positions in Unity\r\n        UpdateJointPositions(jointStates.data);\r\n    }\r\n\r\n    void ApplyVelocityCommand(Vector3 linear, Vector3 angular)\r\n    {\r\n        // Apply velocity to Unity robot\r\n        // Implementation depends on robot dynamics\r\n    }\r\n\r\n    void UpdateJointPositions(float[] positions)\r\n    {\r\n        // Update each joint in the Unity robot model\r\n        // Implementation would iterate through robot joints\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(e.h3,{id:"scene-organization",children:"Scene Organization"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Use layers and tags for efficient physics and rendering"}),"\n",(0,t.jsx)(e.li,{children:"Implement object pooling for frequently instantiated objects"}),"\n",(0,t.jsx)(e.li,{children:"Use occlusion culling for large environments"}),"\n",(0,t.jsx)(e.li,{children:"Optimize draw calls with batching"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"asset-management",children:"Asset Management"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Use appropriate polygon counts for real-time performance"}),"\n",(0,t.jsx)(e.li,{children:"Implement texture atlasing for improved rendering"}),"\n",(0,t.jsx)(e.li,{children:"Use LOD systems for distant objects"}),"\n",(0,t.jsx)(e.li,{children:"Optimize animations with compression"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsx)(e.p,{children:"After completing this chapter, you will be able to:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Set up Unity for robotics simulation and visualization"}),"\n",(0,t.jsx)(e.li,{children:"Implement sensor simulation in Unity"}),"\n",(0,t.jsx)(e.li,{children:"Create realistic robot environments"}),"\n",(0,t.jsx)(e.li,{children:"Integrate Unity with ROS/ROS 2 for bidirectional communication"}),"\n",(0,t.jsx)(e.li,{children:"Optimize Unity scenes for real-time robotics applications"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"hands-on-exercise",children:"Hands-on Exercise"}),"\n",(0,t.jsx)(e.p,{children:"Create a simple Unity scene with a robot model that can receive movement commands from ROS and visualize its environment. Implement basic camera and LIDAR sensors that publish data back to ROS."}),"\n",(0,t.jsx)(e.admonition,{type:"tip",children:(0,t.jsx)(e.p,{children:"Use Unity's built-in Profiler to identify performance bottlenecks in your robotics simulation."})}),"\n",(0,t.jsx)(e.admonition,{type:"note",children:(0,t.jsx)(e.p,{children:"Consider using Unity's Recorder package to capture simulation data for later analysis and debugging."})})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}}}]);