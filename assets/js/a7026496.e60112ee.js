"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[662],{8453:(n,e,i)=>{i.d(e,{R:()=>r,x:()=>s});var t=i(6540);const o={},a=t.createContext(o);function r(n){const e=t.useContext(a);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),t.createElement(a.Provider,{value:e},n.children)}},9256:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"module2/unity-visualization","title":"Chapter 3: Unity Visualization for Robotics","description":"Introduction to Unity for Robotics","source":"@site/docs/module2/unity-visualization.md","sourceDirName":"module2","slug":"/module2/unity-visualization","permalink":"/hackathon-01-AI-textbook/docs/module2/unity-visualization","draft":false,"unlisted":false,"editUrl":"https://github.com/maheenali021/hackathon-01-AI-textbook/tree/main/docs/module2/unity-visualization.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Chapter 3: Unity Visualization for Robotics"},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 2: Gazebo Basics","permalink":"/hackathon-01-AI-textbook/docs/module2/gazebo-basics"},"next":{"title":"Chapter 4: Sensor Simulation in Digital Twins","permalink":"/hackathon-01-AI-textbook/docs/module2/sensor-simulation"}}');var o=i(4848),a=i(8453);const r={sidebar_position:3,title:"Chapter 3: Unity Visualization for Robotics"},s="Unity Visualization for Robotics",l={},c=[{value:"Introduction to Unity for Robotics",id:"introduction-to-unity-for-robotics",level:2},{value:"Unity Robotics Setup",id:"unity-robotics-setup",level:2},{value:"Installing Unity Robotics Hub",id:"installing-unity-robotics-hub",level:3},{value:"Unity ROS TCP Connector",id:"unity-ros-tcp-connector",level:3},{value:"Creating Robot Environments",id:"creating-robot-environments",level:2},{value:"Environment Setup",id:"environment-setup",level:3},{value:"Physics Simulation",id:"physics-simulation",level:2},{value:"Unity Physics vs Real Robot Dynamics",id:"unity-physics-vs-real-robot-dynamics",level:3},{value:"Sensor Simulation",id:"sensor-simulation",level:2},{value:"Camera Simulation",id:"camera-simulation",level:3},{value:"LIDAR Simulation",id:"lidar-simulation",level:3},{value:"Human-Robot Interaction",id:"human-robot-interaction",level:2},{value:"AR/VR Integration",id:"arvr-integration",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Level of Detail (LOD) System",id:"level-of-detail-lod-system",level:3},{value:"Integration with ROS/ROS 2",id:"integration-with-rosros-2",level:2},{value:"Message Handling",id:"message-handling",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Scene Organization",id:"scene-organization",level:3},{value:"Asset Management",id:"asset-management",level:3},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Hands-on Exercise",id:"hands-on-exercise",level:2}];function d(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"unity-visualization-for-robotics",children:"Unity Visualization for Robotics"})}),"\n",(0,o.jsx)(e.h2,{id:"introduction-to-unity-for-robotics",children:"Introduction to Unity for Robotics"}),"\n",(0,o.jsx)(e.p,{children:"Unity is a powerful game engine that can be used for robotics simulation and visualization. It provides high-quality rendering capabilities and physics simulation, making it suitable for creating realistic robot environments."}),"\n",(0,o.jsx)(e.h2,{id:"unity-robotics-setup",children:"Unity Robotics Setup"}),"\n",(0,o.jsx)(e.h3,{id:"installing-unity-robotics-hub",children:"Installing Unity Robotics Hub"}),"\n",(0,o.jsx)(e.p,{children:"Unity provides the Robotics Hub to streamline the connection between Unity and ROS/ROS 2:"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:"Download Unity Hub from unity.com"}),"\n",(0,o.jsx)(e.li,{children:"Install Unity Editor (2021.3 LTS or newer recommended)"}),"\n",(0,o.jsx)(e.li,{children:"Install the Unity Robotics Hub package"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"unity-ros-tcp-connector",children:"Unity ROS TCP Connector"}),"\n",(0,o.jsx)(e.p,{children:"The Unity ROS TCP Connector enables communication between Unity and ROS:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-csharp",children:'using Unity.Robotics.ROSTCPConnector;\nusing RosMessageTypes.Std;\nusing UnityEngine;\n\npublic class UnityRobotController : MonoBehaviour\n{\n    ROSConnection ros;\n    public string topicName = "unity_robot_command";\n\n    void Start()\n    {\n        // Get the ROS connection system\n        ros = ROSConnection.GetOrCreateInstance();\n        ros.RegisterPublisher<UInt8Msg>(topicName);\n    }\n\n    void Update()\n    {\n        // Example: Send a command to ROS\n        if (Input.GetKeyDown(KeyCode.Space))\n        {\n            UInt8Msg command = new UInt8Msg();\n            command.data = 1; // Send command value\n            ros.Publish(topicName, command);\n        }\n    }\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"creating-robot-environments",children:"Creating Robot Environments"}),"\n",(0,o.jsx)(e.h3,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-csharp",children:"using UnityEngine;\n\npublic class RobotEnvironment : MonoBehaviour\n{\n    public GameObject robotPrefab;\n    public Transform spawnPoint;\n    public Material[] materials;\n\n    void Start()\n    {\n        // Spawn robot in environment\n        Instantiate(robotPrefab, spawnPoint.position, spawnPoint.rotation);\n\n        // Set up environment materials\n        SetupEnvironment();\n    }\n\n    void SetupEnvironment()\n    {\n        // Create obstacles, platforms, etc.\n        CreateObstacles();\n        SetLighting();\n    }\n\n    void CreateObstacles()\n    {\n        // Create various obstacles for robot navigation\n        for (int i = 0; i < 10; i++)\n        {\n            Vector3 pos = new Vector3(\n                Random.Range(-10f, 10f),\n                0.5f,\n                Random.Range(-10f, 10f)\n            );\n\n            GameObject obstacle = GameObject.CreatePrimitive(PrimitiveType.Cube);\n            obstacle.transform.position = pos;\n            obstacle.transform.localScale = new Vector3(\n                Random.Range(0.5f, 2f),\n                Random.Range(1f, 3f),\n                Random.Range(0.5f, 2f)\n            );\n\n            // Add material\n            Renderer renderer = obstacle.GetComponent<Renderer>();\n            renderer.material = materials[Random.Range(0, materials.Length)];\n        }\n    }\n\n    void SetLighting()\n    {\n        // Configure lighting for the scene\n        RenderSettings.ambientLight = Color.gray;\n        RenderSettings.fog = true;\n        RenderSettings.fogColor = Color.lightGray;\n        RenderSettings.fogDensity = 0.01f;\n    }\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"physics-simulation",children:"Physics Simulation"}),"\n",(0,o.jsx)(e.h3,{id:"unity-physics-vs-real-robot-dynamics",children:"Unity Physics vs Real Robot Dynamics"}),"\n",(0,o.jsx)(e.p,{children:"Unity's physics engine can approximate real robot dynamics:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-csharp",children:"using UnityEngine;\n\n[RequireComponent(typeof(Rigidbody))]\npublic class RobotDynamics : MonoBehaviour\n{\n    public float maxForce = 10f;\n    public float maxTorque = 5f;\n    public float frictionCoefficient = 0.1f;\n\n    private Rigidbody rb;\n\n    void Start()\n    {\n        rb = GetComponent<Rigidbody>();\n        ConfigurePhysics();\n    }\n\n    void ConfigurePhysics()\n    {\n        rb.mass = 10f; // Adjust based on real robot mass\n        rb.drag = 0.1f; // Linear drag\n        rb.angularDrag = 0.05f; // Angular drag\n        rb.interpolation = RigidbodyInterpolation.Interpolate;\n    }\n\n    public void ApplyMovement(Vector3 linearVelocity, Vector3 angularVelocity)\n    {\n        // Apply forces to simulate robot movement\n        rb.velocity = linearVelocity;\n        rb.angularVelocity = angularVelocity;\n    }\n\n    public void ApplyControlInputs(float forwardForce, float turnTorque)\n    {\n        // Apply forces based on control inputs\n        Vector3 forwardForceVector = transform.forward * forwardForce;\n        rb.AddForce(forwardForceVector, ForceMode.Force);\n\n        rb.AddTorque(transform.up * turnTorque, ForceMode.Torque);\n    }\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"sensor-simulation",children:"Sensor Simulation"}),"\n",(0,o.jsx)(e.h3,{id:"camera-simulation",children:"Camera Simulation"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\nusing Unity.Robotics.ROSTCPConnector;\nusing RosMessageTypes.Sensor;\n\npublic class CameraSensor : MonoBehaviour\n{\n    public Camera camera;\n    public string imageTopic = "camera/image_raw";\n    public int width = 640;\n    public int height = 480;\n\n    private ROSConnection ros;\n    private RenderTexture renderTexture;\n\n    void Start()\n    {\n        ros = ROSConnection.GetOrCreateInstance();\n\n        // Create render texture for camera\n        renderTexture = new RenderTexture(width, height, 24);\n        camera.targetTexture = renderTexture;\n    }\n\n    void Update()\n    {\n        if (Time.frameCount % 30 == 0) // Send image every 30 frames\n        {\n            SendImage();\n        }\n    }\n\n    void SendImage()\n    {\n        // Capture image from camera\n        Texture2D tex = new Texture2D(width, height, TextureFormat.RGB24, false);\n        RenderTexture.active = renderTexture;\n        tex.ReadPixels(new Rect(0, 0, width, height), 0, 0);\n        tex.Apply();\n\n        // Convert to byte array and publish\n        byte[] imageData = tex.EncodeToPNG();\n\n        // Create ROS message (simplified)\n        // In practice, you would create a proper sensor_msgs/Image message\n\n        Destroy(tex);\n    }\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"lidar-simulation",children:"LIDAR Simulation"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\nusing System.Collections.Generic;\n\npublic class LIDARSensor : MonoBehaviour\n{\n    public int numRays = 360;\n    public float maxRange = 10f;\n    public float minRange = 0.1f;\n    public string lidarTopic = "scan";\n\n    private ROSConnection ros;\n\n    void Start()\n    {\n        ros = ROSConnection.GetOrCreateInstance();\n    }\n\n    void Update()\n    {\n        if (Time.frameCount % 10 == 0) // Sample every 10 frames\n        {\n            ScanEnvironment();\n        }\n    }\n\n    void ScanEnvironment()\n    {\n        List<float> ranges = new List<float>();\n\n        for (int i = 0; i < numRays; i++)\n        {\n            float angle = (i * 360f / numRays) * Mathf.Deg2Rad;\n            Vector3 direction = new Vector3(\n                Mathf.Cos(angle),\n                0,\n                Mathf.Sin(angle)\n            );\n\n            RaycastHit hit;\n            if (Physics.Raycast(transform.position, direction, out hit, maxRange))\n            {\n                ranges.Add(hit.distance);\n            }\n            else\n            {\n                ranges.Add(maxRange); // No obstacle detected\n            }\n        }\n\n        // Publish scan data to ROS (implementation depends on ROS message format)\n        PublishScanData(ranges);\n    }\n\n    void PublishScanData(List<float> ranges)\n    {\n        // Publish to ROS topic\n        // Implementation would create and publish sensor_msgs/LaserScan message\n    }\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"human-robot-interaction",children:"Human-Robot Interaction"}),"\n",(0,o.jsx)(e.h3,{id:"arvr-integration",children:"AR/VR Integration"}),"\n",(0,o.jsx)(e.p,{children:"Unity excels at creating immersive AR/VR experiences for human-robot interaction:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\nusing UnityEngine.XR;\n\npublic class HumanRobotInterface : MonoBehaviour\n{\n    public GameObject robotAvatar;\n    public Transform userHead;\n    public float interactionDistance = 3f;\n\n    void Update()\n    {\n        // Handle VR/AR interactions\n        HandleInteractions();\n        UpdateRobotBehavior();\n    }\n\n    void HandleInteractions()\n    {\n        // Raycast from user viewpoint\n        Vector3 rayOrigin = userHead.position;\n        Vector3 rayDirection = userHead.forward;\n\n        RaycastHit hit;\n        if (Physics.Raycast(rayOrigin, rayDirection, out hit, interactionDistance))\n        {\n            if (hit.collider.CompareTag("Robot"))\n            {\n                // User is looking at robot\n                HighlightRobot(true);\n\n                if (Input.GetButtonDown("Fire1")) // Trigger button\n                {\n                    SendCommandToRobot();\n                }\n            }\n            else\n            {\n                HighlightRobot(false);\n            }\n        }\n        else\n        {\n            HighlightRobot(false);\n        }\n    }\n\n    void HighlightRobot(bool highlight)\n    {\n        // Visual feedback for robot selection\n        Renderer robotRenderer = robotAvatar.GetComponent<Renderer>();\n        if (highlight)\n        {\n            robotRenderer.material.color = Color.yellow;\n        }\n        else\n        {\n            robotRenderer.material.color = Color.white;\n        }\n    }\n\n    void SendCommandToRobot()\n    {\n        // Send command via ROS\n        // Implementation would publish to robot control topic\n    }\n\n    void UpdateRobotBehavior()\n    {\n        // Update robot behavior based on simulation\n    }\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,o.jsx)(e.h3,{id:"level-of-detail-lod-system",children:"Level of Detail (LOD) System"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-csharp",children:"using UnityEngine;\n\npublic class RobotLODSystem : MonoBehaviour\n{\n    public GameObject[] lodLevels;\n    public float[] lodDistances;\n    public Transform viewer;\n\n    void Start()\n    {\n        viewer = Camera.main.transform;\n    }\n\n    void Update()\n    {\n        UpdateLOD();\n    }\n\n    void UpdateLOD()\n    {\n        float distance = Vector3.Distance(transform.position, viewer.position);\n\n        for (int i = 0; i < lodLevels.Length; i++)\n        {\n            if (distance < lodDistances[i])\n            {\n                ActivateLOD(i);\n                return;\n            }\n        }\n\n        // If beyond max distance, hide robot\n        foreach (GameObject lod in lodLevels)\n        {\n            lod.SetActive(false);\n        }\n    }\n\n    void ActivateLOD(int level)\n    {\n        for (int i = 0; i < lodLevels.Length; i++)\n        {\n            lodLevels[i].SetActive(i == level);\n        }\n    }\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"integration-with-rosros-2",children:"Integration with ROS/ROS 2"}),"\n",(0,o.jsx)(e.h3,{id:"message-handling",children:"Message Handling"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-csharp",children:'using Unity.Robotics.ROSTCPConnector;\nusing RosMessageTypes.Geometry;\nusing RosMessageTypes.Std;\n\npublic class ROSMessageHandler : MonoBehaviour\n{\n    ROSConnection ros;\n\n    // Topics\n    string cmdVelTopic = "cmd_vel";\n    string jointStatesTopic = "joint_states";\n\n    void Start()\n    {\n        ros = ROSConnection.GetOrCreateInstance();\n\n        // Subscribe to ROS topics\n        ros.Subscribe<TwistMsg>(cmdVelTopic, CmdVelCallback);\n        ros.Subscribe<Float32MultiArrayMsg>(jointStatesTopic, JointStatesCallback);\n    }\n\n    void CmdVelCallback(TwistMsg twist)\n    {\n        // Handle velocity commands\n        Vector3 linear = new Vector3(twist.linear.x, twist.linear.y, twist.linear.z);\n        Vector3 angular = new Vector3(twist.angular.x, twist.angular.y, twist.angular.z);\n\n        // Apply to robot\n        ApplyVelocityCommand(linear, angular);\n    }\n\n    void JointStatesCallback(Float32MultiArrayMsg jointStates)\n    {\n        // Update joint positions in Unity\n        UpdateJointPositions(jointStates.data);\n    }\n\n    void ApplyVelocityCommand(Vector3 linear, Vector3 angular)\n    {\n        // Apply velocity to Unity robot\n        // Implementation depends on robot dynamics\n    }\n\n    void UpdateJointPositions(float[] positions)\n    {\n        // Update each joint in the Unity robot model\n        // Implementation would iterate through robot joints\n    }\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsx)(e.h3,{id:"scene-organization",children:"Scene Organization"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Use layers and tags for efficient physics and rendering"}),"\n",(0,o.jsx)(e.li,{children:"Implement object pooling for frequently instantiated objects"}),"\n",(0,o.jsx)(e.li,{children:"Use occlusion culling for large environments"}),"\n",(0,o.jsx)(e.li,{children:"Optimize draw calls with batching"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"asset-management",children:"Asset Management"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Use appropriate polygon counts for real-time performance"}),"\n",(0,o.jsx)(e.li,{children:"Implement texture atlasing for improved rendering"}),"\n",(0,o.jsx)(e.li,{children:"Use LOD systems for distant objects"}),"\n",(0,o.jsx)(e.li,{children:"Optimize animations with compression"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,o.jsx)(e.p,{children:"After completing this chapter, you will be able to:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Set up Unity for robotics simulation and visualization"}),"\n",(0,o.jsx)(e.li,{children:"Implement sensor simulation in Unity"}),"\n",(0,o.jsx)(e.li,{children:"Create realistic robot environments"}),"\n",(0,o.jsx)(e.li,{children:"Integrate Unity with ROS/ROS 2 for bidirectional communication"}),"\n",(0,o.jsx)(e.li,{children:"Optimize Unity scenes for real-time robotics applications"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"hands-on-exercise",children:"Hands-on Exercise"}),"\n",(0,o.jsx)(e.p,{children:"Create a simple Unity scene with a robot model that can receive movement commands from ROS and visualize its environment. Implement basic camera and LIDAR sensors that publish data back to ROS."}),"\n",(0,o.jsx)(e.admonition,{type:"tip",children:(0,o.jsx)(e.p,{children:"Use Unity's built-in Profiler to identify performance bottlenecks in your robotics simulation."})}),"\n",(0,o.jsx)(e.admonition,{type:"note",children:(0,o.jsx)(e.p,{children:"Consider using Unity's Recorder package to capture simulation data for later analysis and debugging."})})]})}function u(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}}}]);