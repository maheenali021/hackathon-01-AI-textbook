"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[474],{5064:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var o=t(6540),a=t(1656),n=t(4848);const i=({message:e})=>{const s="user"===e.role;return(0,n.jsx)("div",{className:"message "+(s?"user-message":"assistant-message"),children:(0,n.jsxs)("div",{className:"message-content",children:[(0,n.jsx)("div",{className:"message-text",children:e.content}),e.sources&&e.sources.length>0&&(0,n.jsx)("div",{className:"message-sources",children:(0,n.jsxs)("details",{children:[(0,n.jsxs)("summary",{children:["Sources (",e.sources.length,")"]}),(0,n.jsx)("ul",{children:e.sources.map((e,s)=>(0,n.jsxs)("li",{className:"source-item",children:[(0,n.jsxs)("strong",{children:["Source ",s+1,":"]})," ",e.metadata?.title||e.metadata?.source||"N/A",e.metadata?.page&&(0,n.jsxs)("span",{children:[", Page: ",e.metadata.page]}),e.metadata?.section&&(0,n.jsxs)("span",{children:[", Section: ",e.metadata.section]})]},s))})]})}),e.isError&&(0,n.jsx)("div",{className:"error-message",children:(0,n.jsx)("small",{children:"Please try rephrasing your question or try again later."})})]})})},r=({onSendMessage:e,isLoading:s})=>{const[t,a]=(0,o.useState)("");return(0,n.jsxs)("form",{className:"chat-input-form",onSubmit:o=>{o.preventDefault(),t.trim()&&!s&&(e(t),a(""))},children:[(0,n.jsxs)("div",{className:"input-container",children:[(0,n.jsx)("input",{type:"text",value:t,onChange:e=>a(e.target.value),placeholder:"Ask a question about the textbook content...",disabled:s,className:"chat-input"}),(0,n.jsx)("button",{type:"submit",disabled:s||!t.trim(),className:"send-button",children:s?"Sending...":"Send"})]}),(0,n.jsx)("div",{className:"input-hint",children:(0,n.jsx)("small",{children:"Ask questions about robotics, AI, or related topics based on the textbook content"})})]})},c="undefined"!=typeof window&&window.REACT_APP_BACKEND_URL?window.REACT_APP_BACKEND_URL:"https://web-production-3be9d.up.railway.app",l=()=>{const[e,s]=(0,o.useState)([]),[t,a]=(0,o.useState)(!1),[l,d]=(0,o.useState)(!1),h=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(d(!0),"undefined"!=typeof window&&window.localStorage){const e=localStorage.getItem("chatbot_messages");e&&s(JSON.parse(e))}},[]);(0,o.useEffect)(()=>{l&&"undefined"!=typeof window&&window.localStorage&&localStorage.setItem("chatbot_messages",JSON.stringify(e))},[e,l]),(0,o.useEffect)(()=>{h.current?.scrollIntoView({behavior:"smooth"})},[e]);return(0,n.jsxs)("div",{className:"chatbot-container",children:[(0,n.jsx)("div",{className:"chatbot-header",children:(0,n.jsx)("h3",{children:"AI Textbook Assistant"})}),(0,n.jsxs)("div",{className:"chatbot-messages",children:[0===e.length?(0,n.jsxs)("div",{className:"chatbot-welcome",children:[(0,n.jsx)("h4",{children:"\ud83e\udd16 Hello! I'm your AI assistant for the AI Robotics Textbook."}),(0,n.jsx)("p",{children:"Ask me any questions about robotics, AI, or related topics, and I'll provide answers based on the textbook content with proper source attribution."})]}):e.map(e=>(0,n.jsx)(i,{message:e},e.id)),t&&(0,n.jsx)("div",{className:"loading-indicator",children:"AI is thinking..."}),(0,n.jsx)("div",{ref:h})]}),(0,n.jsx)("div",{className:"chatbot-controls",children:(0,n.jsx)("button",{onClick:()=>{"undefined"!=typeof window&&window.localStorage&&(s([]),localStorage.removeItem("chatbot_messages"),localStorage.removeItem("conversation_id"))},className:"clear-conversation-btn",children:"Clear Conversation"})}),(0,n.jsx)(r,{onSendMessage:async(e,o=null)=>{if(!e.trim()||t||!l)return;const n={id:Date.now(),role:"user",content:o?`${e}\n\nContext: ${o.substring(0,200)}${o.length>200?"...":""}`:e,timestamp:(new Date).toISOString()};s(e=>[...e,n]),a(!0);try{const t={query:e,query_type:"general",filters:{},conversation_id:"undefined"!=typeof window&&window.localStorage&&localStorage.getItem("conversation_id")||null},o=c.endsWith("/")?c.slice(0,-1):c,a=await fetch(`${o}/api/v1/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw new Error(`API request failed with status ${a.status}`);const n=await a.json();n.conversation_id&&"undefined"!=typeof window&&window.localStorage&&localStorage.setItem("conversation_id",n.conversation_id);const i={id:Date.now()+1,role:"assistant",content:n.response,sources:n.source_attribution,confidence:n.confidence_score,timestamp:n.response_timestamp};s(e=>[...e,i])}catch(i){console.error("Error sending message:",i);const e={id:Date.now()+1,role:"assistant",content:"Sorry, I encountered an error while processing your request. Please try again.",isError:!0,timestamp:(new Date).toISOString()};s(s=>[...s,e])}finally{a(!1)}},isLoading:t})]})};function d(){return(0,n.jsx)(a.A,{title:"AI Textbook Assistant",description:"An AI-powered chatbot to help you with questions about the AI Robotics Textbook",children:(0,n.jsx)("div",{className:"container margin-vert--lg",children:(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("div",{className:"col col--12",children:[(0,n.jsx)("h1",{children:"AI Textbook Assistant"}),(0,n.jsx)("p",{children:"Ask me any questions about robotics, AI, or related topics, and I'll provide answers based on the textbook content with proper source attribution."}),(0,n.jsx)("div",{style:{maxWidth:"800px",margin:"20px auto"},children:(0,n.jsx)(l,{})})]})})})})}}}]);